<html lang="en">
	<head>
		<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
		<script>
			var global=global||globalThis||window;
			class pack{
			
				static onStart(){
					global.global=global;
					global.pack=this;
					this.doCORSRequest({method:'GET',url:'http://content.warframe.com/dynamic/worldState.php'},function({target}){if(target.readyState===4&&target.status===200){document.body.innerText='JSON loaded.';global.wfJSON=JSON.parse(target.response);console.log(global.wfJSON);}});
				}
			
				static checkForValidURL(str){
					var pattern=new RegExp('^(https?:\\/\\/)?'+'((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+'((\\d{1,3}\\.){3}\\d{1,3}))'+'(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+'(\\?[;&a-z\\d%_.~+=-]*)?'+'(\\#[-a-z\\d_]*)?$','i');
					return !!pattern.test(str);
				}
				
				static doCORSRequest(options=undefined,func=undefined){
					if(!options||!func||options.constructor!==Object||func.constructor!==Function||options.url.constructor!==String||options.method.constructor!==String||!this.checkForValidURL(options.url))return null;
					var xhr=new XMLHttpRequest();
					xhr.onreadystatechange=func;
					xhr.open(options.method,'https://cors-anywhere.herokuapp.com/'+options.url);
					if(/^POST/i.test(options.method))xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
					xhr.send(options.data);
				}
				static isJSON(str=undefined){
					if(!str||str.constructor!==String)return false;
					if(/^[\r\n]+$/g.test(str))return false;//newlines break json parsing.
					else if(/^0[0-9\.]*$/g.test(str)&&/^0[^\.][0-9\.]*$/g.test(str))return false;//Numbers that start with a zero are not parseable, floats can only start with a zero in the ones place
					return /^[\],:{}\s]*$/.test(str.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''));
				}
			}
			pack.onStart();
		</script>
	</head>
	<body></body>
	<footer></footer>
</html>
